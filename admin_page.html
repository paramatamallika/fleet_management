<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fleet Management - Admin</title>
  <style>
    body { margin:0; font-family: Arial, sans-serif; background:#f2f2f2; }
    nav {
      display:flex;
      align-items:center;
      padding:10px 20px;
      background:#007bff;
      color:white;
      gap:15px;
      flex-wrap:wrap;
    }
    nav select, nav button {
      padding:5px 8px;
      border-radius:4px;
      border:none;
    }
    nav button { background:#ffc107; cursor:pointer; }
    main { display:flex; }
    .sidebar {
      width:280px;
      padding:20px;
      background:white;
      border-right:1px solid #ccc;
    }
    .sidebar h3 { margin-top:0; }
    .sidebar input, .sidebar select { width:100%; padding:8px; margin-bottom:10px; border-radius:4px; border:1px solid #ccc; }
    .sidebar label { display:flex; align-items:center; gap:5px; margin-bottom:10px; }
    .sidebar button { width:100%; padding:10px; background:#28a745; color:white; border:none; border-radius:4px; cursor:pointer; }
    .sidebar button:hover { background:#218838; }

    .main-content {
      flex:1;
      padding:20px;
      display:flex;
      flex-wrap:wrap;
      gap:15px;
    }

    .fleet-card {
      background:white;
      width:calc(33% - 20px);
      border-radius:6px;
      padding:10px;
      box-shadow:0 2px 8px rgba(0,0,0,0.15);
    }
    .fleet-card img { width:100%; border-radius:4px; }
    .fleet-card p { margin:5px 0; }
    .fleet-card button {
      margin:3px 2px 0 0;
      padding:5px 8px;
      border:none;
      border-radius:4px;
      cursor:pointer;
    }
    .update-btn { background:#17a2b8; color:white; }
    .availability-btn { background:#ffc107; color:white; }
    .delete-btn { background:#dc3545; color:white; }
  </style>
</head>
<body>
  <nav>
    Category:
    <select id="categoryFilter">
      <option value="All">All</option>
      <option value="Auto">Auto</option>
      <option value="Car">Car</option>
      <option value="Truck">Truck</option>
      <option value="Bus">Bus</option>
    </select>
    Availability:
    <select id="availabilityFilter">
      <option value="All">All</option>
      <option value="Available">Available</option>
      <option value="Unavailable">Unavailable</option>
    </select>
    <button id="clearFilter">Clear Filter</button>
  </nav>

  <main>
    <div class="sidebar">
      <h3>Add Fleet</h3>
      <input type="text" id="regNo" placeholder="Reg No of Vehicle">
      <select id="category">
        <option value="">Select Category</option>
        <option value="Auto">Auto</option>
        <option value="Car">Car</option>
        <option value="Truck">Truck</option>
        <option value="Bus">Bus</option>
      </select>
      <input type="text" id="driverName" placeholder="Driver Name">
      <label>
        <input type="checkbox" id="isAvailable"> Available
      </label>
      <button id="addFleetBtn">Add Fleet</button>
    </div>

    <div class="main-content" id="fleetContainer"></div>
  </main>

  <script>
    const fleetContainer = document.getElementById("fleetContainer");
    const fleetData = [];

    function renderFleet(data){
      fleetContainer.innerHTML = "";
      data.forEach((v, i)=>{
        const card = document.createElement("div");
        card.className = "fleet-card";
        card.innerHTML = `
          <img src="https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png" alt="Vehicle">
          <p><strong>Reg No:</strong> ${v.regNo}</p>
          <p><strong>Category:</strong> ${v.category}</p>
          <p><strong>Driver:</strong> ${v.driver}</p>
          <p><strong>Availability:</strong> ${v.available}</p>
          <button class="update-btn" onclick="updateDriver(${i})">Update Driver</button>
          <button class="availability-btn" onclick="changeAvailability(${i})">Change Availability</button>
          <button class="delete-btn" onclick="deleteVehicle(${i})">Delete Vehicle</button>
        `;
        fleetContainer.appendChild(card);
      });
    }

    document.getElementById("addFleetBtn").addEventListener("click", ()=>{
      const regNo = document.getElementById("regNo").value.trim();
      const category = document.getElementById("category").value;
      const driver = document.getElementById("driverName").value.trim();
      const available = document.getElementById("isAvailable").checked ? "Available" : "Unavailable";

      if(!regNo || !category || !driver){
        alert("Please fill all required fields");
        return;
      }

      fleetData.push({regNo, category, driver, available});
      renderFleet(fleetData);

      document.getElementById("regNo").value="";
      document.getElementById("category").value="";
      document.getElementById("driverName").value="";
      document.getElementById("isAvailable").checked=false;
    });

    function updateDriver(index){
      const newDriver = prompt("Enter new driver name:")?.trim();
      if(newDriver){
        fleetData[index].driver = newDriver;
        renderFleet(fleetData);
      } else alert("Driver name cannot be empty");
    }

    function changeAvailability(index){
      fleetData[index].available = fleetData[index].available==="Available"?"Unavailable":"Available";
      renderFleet(fleetData);
    }

    function deleteVehicle(index){
      if(confirm("Are you sure you want to delete this vehicle?")){
        fleetData.splice(index,1);
        renderFleet(fleetData);
      }
    }

    const categoryFilter = document.getElementById("categoryFilter");
    const availabilityFilter = document.getElementById("availabilityFilter");
    const clearFilterBtn = document.getElementById("clearFilter");

    function applyFilters(){
      let filtered = fleetData;
      if(categoryFilter.value!=="All") filtered = filtered.filter(v=>v.category===categoryFilter.value);
      if(availabilityFilter.value!=="All") filtered = filtered.filter(v=>v.available===availabilityFilter.value);
      renderFleet(filtered);
    }

    categoryFilter.addEventListener("change", applyFilters);
    availabilityFilter.addEventListener("change", applyFilters);
    clearFilterBtn.addEventListener("click", ()=>{
      categoryFilter.value="All";
      availabilityFilter.value="All";
      renderFleet(fleetData);
    });

  </script>
</body>
</html>
